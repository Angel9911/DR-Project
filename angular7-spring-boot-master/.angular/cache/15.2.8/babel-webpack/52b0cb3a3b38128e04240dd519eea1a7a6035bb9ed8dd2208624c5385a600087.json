{"ast":null,"code":"import { __decorate, __metadata, __spreadArray } from \"tslib\";\nimport __NG_CLI_RESOURCE__0 from \"./list-packages.component.html?ngResource\";\nimport __NG_CLI_RESOURCE__1 from \"./list-packages.component.css?ngResource\";\nimport { Component } from '@angular/core';\nimport { FormControl } from '@angular/forms';\nimport { DecimalPipe } from '@angular/common';\nimport { map, startWith } from 'rxjs/operators';\nimport { DataService } from '../../../service/data.service';\nimport { HttpCourierService } from '../../../service/courier/http-courier.service';\nimport { NgbModal } from '@ng-bootstrap/ng-bootstrap';\nimport { CommentDialogComponent } from '../../../helpers/comment-dialog/comment-dialog.component';\n// tslint:disable-next-line:prefer-const\nvar courierPackages;\nvar statusType = 'получена';\nvar statusTypeProblem = 'Проблем с пратката';\nfunction search(text, pipe) {\n  return courierPackages.filter(function (packages) {\n    var term = text.toLowerCase();\n    // @ts-ignore\n    return packages.name_package.toLowerCase().includes(term) || packages.customer.name.toLowerCase().includes(term) || packages.customer.phone.toLowerCase().includes(term);\n  });\n}\nvar ListPackagesComponent = /** @class */function () {\n  // tslint:disable-next-line:max-line-length\n  function ListPackagesComponent(pipe, dataService, httpCourier, modalService) {\n    var _this = this;\n    this.dataService = dataService;\n    this.httpCourier = httpCourier;\n    this.modalService = modalService;\n    this.filter = new FormControl('');\n    this.username = sessionStorage.getItem('username');\n    console.log(this.username);\n    this.httpCourier.getPackages(this.username).subscribe(function (data) {\n      // @ts-ignore\n      courierPackages = __spreadArray([], data, true);\n      // tslint:disable-next-line:only-arrow-functions\n      _this.packages$ = _this.filter.valueChanges.pipe(startWith(''), map(function (text) {\n        return search(text, pipe);\n      }));\n    });\n  }\n  ListPackagesComponent.prototype.ngOnInit = function () {};\n  ListPackagesComponent.prototype.updatePackage = function (packages) {\n    console.log(packages.package_id);\n    if (packages.package_id != null && statusType != null) {\n      // @ts-ignore\n      this.httpCourier.updatePackageSuccessfull(statusType, packages.package_id).subscribe(function (data) {\n        // tslint:disable-next-line:triple-equals\n        // @ts-ignore\n        alert('Пратката е доставена успешно!');\n      });\n    }\n  };\n  ListPackagesComponent.prototype.updateProblemPackage = function (packages) {\n    var _this = this;\n    var dialogRef = this.modalService.open(CommentDialogComponent);\n    dialogRef.result.then(function (result) {\n      if (result.event === true) {\n        _this.dataService.packagesId = packages.package_id;\n        _this.httpCourier.updateProblemPackage(statusTypeProblem, packages.package_id, result.data, result.file).subscribe(function (data) {\n          alert('Проблемът на пратката е регистриран успешно!');\n        });\n        console.log('dada' + result.data); // Refresh Data in table grid\n      } else {}\n    }, function (reason) {});\n    console.log(dialogRef.result);\n  };\n  ListPackagesComponent.ctorParameters = function () {\n    return [{\n      type: DecimalPipe\n    }, {\n      type: DataService\n    }, {\n      type: HttpCourierService\n    }, {\n      type: NgbModal\n    }];\n  };\n  ListPackagesComponent = __decorate([Component({\n    selector: 'app-list-packages',\n    template: __NG_CLI_RESOURCE__0,\n    styles: [__NG_CLI_RESOURCE__1]\n  }), __metadata(\"design:paramtypes\", [DecimalPipe, DataService, HttpCourierService, NgbModal])], ListPackagesComponent);\n  return ListPackagesComponent;\n}();\nexport { ListPackagesComponent };","map":{"version":3,"mappings":"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","names":["Component","FormControl","DecimalPipe","map","startWith","DataService","HttpCourierService","NgbModal","CommentDialogComponent","courierPackages","statusType","statusTypeProblem","search","text","pipe","filter","term","toLowerCase","packages","name_package","includes","customer","name","phone","dataService","httpCourier","modalService","username","sessionStorage","getItem","console","log","getPackages","subscribe","data","_this","packages$","valueChanges","ListPackagesComponent","package_id","updatePackageSuccessfull","alert","dialogRef","open","result","then","event","packagesId","updateProblemPackage","file","reason","selector","template"],"sourceRoot":"","sources":["E:\\Programs\\SpringAngularProject\\angular7-springboot-crud-tutorial-master\\update-version\\angular7-spring-boot-master\\src\\app\\courier\\layout-courier\\list-packages\\list-packages.component.ts"],"sourcesContent":["import {Component, OnInit, PipeTransform} from '@angular/core';\nimport {Observable} from 'rxjs';\nimport {FormArray, FormControl} from '@angular/forms';\nimport {DecimalPipe} from '@angular/common';\nimport {map, startWith} from 'rxjs/operators';\nimport {DataService} from '../../../service/data.service';\nimport {HttpCourierService} from '../../../service/courier/http-courier.service';\nimport {Packages} from '../../../models/Packages';\nimport {NgbModal} from '@ng-bootstrap/ng-bootstrap';\nimport {CommentDialogComponent} from '../../../helpers/comment-dialog/comment-dialog.component';\n// tslint:disable-next-line:prefer-const\nlet courierPackages: Packages[];\nconst statusType = 'получена';\nconst statusTypeProblem = 'Проблем с пратката';\n\nfunction search(text: string, pipe: PipeTransform): Packages[] {\n  return courierPackages.filter(packages => {\n    const term = text.toLowerCase();\n    // @ts-ignore\n    return packages.name_package.toLowerCase().includes(term)\n      || packages.customer.name.toLowerCase().includes(term)\n      || packages.customer.phone.toLowerCase().includes(term);\n  });\n}\n@Component({\n  selector: 'app-list-packages',\n  templateUrl: './list-packages.component.html',\n  styleUrls: ['./list-packages.component.css']\n})\nexport class ListPackagesComponent implements OnInit {\n  packages$: Observable<Packages[]>;\n  username: string;\n  getComment: string;\n  comment: string;\n  filter = new FormControl('');\n  // tslint:disable-next-line:max-line-length\n  constructor(pipe: DecimalPipe, private dataService: DataService, private httpCourier: HttpCourierService, private modalService: NgbModal) {\n    this.username = sessionStorage.getItem('username');\n    console.log(this.username);\n    this.httpCourier.getPackages(this.username).subscribe(data => {\n      // @ts-ignore\n      courierPackages = [...data];\n      // tslint:disable-next-line:only-arrow-functions\n      this.packages$ = this.filter.valueChanges.pipe(\n        startWith(''),\n        map(text => search(text, pipe))\n      );\n    });\n  }\n  ngOnInit() {\n  }\n  updatePackage(packages: Packages): void {\n    console.log(packages.package_id);\n    if (packages.package_id != null && statusType != null) {\n      // @ts-ignore\n      this.httpCourier.updatePackageSuccessfull(statusType, packages.package_id).subscribe(data => {\n        // tslint:disable-next-line:triple-equals\n        // @ts-ignore\n        alert('Пратката е доставена успешно!');\n      });\n    }\n  }\n  updateProblemPackage(packages: Packages): void {\n    const dialogRef = this.modalService.open(CommentDialogComponent);\n    dialogRef.result.then((result) => {\n      if ( result.event === true ) {\n        this.dataService.packagesId = packages.package_id;\n        this.httpCourier.updateProblemPackage(statusTypeProblem, packages.package_id, result.data, result.file).subscribe(data => {\n          alert('Проблемът на пратката е регистриран успешно!');\n        });\n        console.log('dada' + result.data); // Refresh Data in table grid\n      } else {\n\n      }\n    }, (reason) => {\n    });\n    console.log(dialogRef.result);\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}