{"ast":null,"code":"import { __decorate, __metadata, __spreadArray } from \"tslib\";\nimport __NG_CLI_RESOURCE__0 from \"./list-couriers.component.html?ngResource\";\nimport __NG_CLI_RESOURCE__1 from \"./list-couriers.component.css?ngResource\";\nimport { Component } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { HttpAdiministratorService } from '../../../service/administrator/http-adiministrator.service';\nimport { ConfirmDialogService } from '../../../service/confirm-dialog.service';\nimport { FormControl } from '@angular/forms';\nimport { map, startWith } from 'rxjs/operators';\nimport { DecimalPipe } from '@angular/common';\nimport { DataService } from '../../../service/data.service';\n// tslint:disable-next-line:prefer-const\nvar couriers;\nfunction search(text, pipe) {\n  return couriers.filter(function (courier) {\n    console.log(courier);\n    var term = text.toLowerCase();\n    return courier.courier_first_name.toLowerCase().includes(term) || courier.courier_last_name.toLowerCase().includes(term) || courier.courier_city_name.toLowerCase().includes(term) || courier.courier_phone.toLowerCase().includes(term);\n  });\n}\nvar ListCouriersComponent = /** @class */function () {\n  // tslint:disable-next-line:max-line-length\n  function ListCouriersComponent(router, apiService, confirmService, pipe, dataService) {\n    var _this = this;\n    this.router = router;\n    this.apiService = apiService;\n    this.confirmService = confirmService;\n    this.pipe = pipe;\n    this.dataService = dataService;\n    this.filter = new FormControl('');\n    this.apiService.getCouriers().subscribe(function (data) {\n      couriers = __spreadArray([], data, true);\n      _this.result$ = _this.filter.valueChanges.pipe(startWith(''), map(function (text) {\n        return search(text, pipe);\n      }));\n    });\n  }\n  ListCouriersComponent.prototype.ngOnInit = function () {};\n  ListCouriersComponent.prototype.deleteCourier = function (courier) {\n    var _this = this;\n    this.confirmService.confirm('Моля потвърдете', 'Искате ли да изтриете този куриер ?', 'Откажи', 'Изпрати').then(function (confirmed) {\n      // tslint:disable-next-line:triple-equals\n      if (confirmed != false) {\n        _this.apiService.deleteCourier(courier.courier_id).subscribe(function (data) {\n          couriers = couriers.filter(function (u) {\n            return u !== courier;\n          });\n        });\n      }\n    }).catch(function () {\n      return console.log('User dismissed the dialog (e.g., by using ESC, clicking the cross icon, or clicking outside the dialog)');\n    });\n  };\n  ListCouriersComponent.prototype.editCourier = function (courier) {\n    // window.localStorage.removeItem('editUserId');\n    // window.localStorage.setItem('editUserId', customer.toString());\n    this.dataService.courier = courier;\n    this.router.navigate(['/administrator/edit-user']);\n  };\n  ListCouriersComponent.prototype.addCourier = function () {\n    this.router.navigate(['/administrator/add-courier']);\n  };\n  ListCouriersComponent.ctorParameters = function () {\n    return [{\n      type: Router\n    }, {\n      type: HttpAdiministratorService\n    }, {\n      type: ConfirmDialogService\n    }, {\n      type: DecimalPipe\n    }, {\n      type: DataService\n    }];\n  };\n  ListCouriersComponent = __decorate([Component({\n    selector: 'app-list-couriers',\n    template: __NG_CLI_RESOURCE__0,\n    styles: [__NG_CLI_RESOURCE__1]\n  }), __metadata(\"design:paramtypes\", [Router, HttpAdiministratorService, ConfirmDialogService, DecimalPipe, DataService])], ListCouriersComponent);\n  return ListCouriersComponent;\n}();\nexport { ListCouriersComponent };","map":{"version":3,"mappings":"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","names":["Component","Router","HttpAdiministratorService","ConfirmDialogService","FormControl","map","startWith","DecimalPipe","DataService","couriers","search","text","pipe","filter","console","log","courier","term","toLowerCase","courier_first_name","includes","courier_last_name","courier_city_name","courier_phone","router","apiService","confirmService","dataService","getCouriers","subscribe","data","_this","result$","valueChanges","ListCouriersComponent","confirm","then","confirmed","deleteCourier","courier_id","catch","navigate","selector","template"],"sourceRoot":"","sources":["E:\\Programs\\SpringAngularProject\\angular7-springboot-crud-tutorial-master\\update-version\\angular7-spring-boot-master\\src\\app\\administrator\\layout-adiministrator\\list-couriers\\list-couriers.component.ts"],"sourcesContent":["import {Component, OnInit, PipeTransform} from '@angular/core';\nimport {Customer} from '../../../models/user';\nimport {Courier} from '../../../models/Courier';\nimport {Router} from '@angular/router';\nimport {HttpAdiministratorService} from '../../../service/administrator/http-adiministrator.service';\nimport {ConfirmDialogService} from '../../../service/confirm-dialog.service';\nimport {FormControl} from '@angular/forms';\nimport {Observable} from 'rxjs';\nimport {map, startWith} from 'rxjs/operators';\nimport {DecimalPipe} from '@angular/common';\nimport {DataService} from '../../../service/data.service';\n// tslint:disable-next-line:prefer-const\nlet couriers: Courier[];\n\nfunction search(text: string, pipe: PipeTransform): Courier[] {\n  return couriers.filter(courier => {\n    console.log(courier);\n    const term = text.toLowerCase();\n    return courier.courier_first_name.toLowerCase().includes(term)\n      || courier.courier_last_name.toLowerCase().includes(term)\n      || courier.courier_city_name.toLowerCase().includes(term)\n      || courier.courier_phone.toLowerCase().includes(term);\n  });\n}\n\n@Component({\n  selector: 'app-list-couriers',\n  templateUrl: './list-couriers.component.html',\n  styleUrls: ['./list-couriers.component.css']\n})\nexport class ListCouriersComponent implements OnInit {\n  filter = new FormControl('');\n  // users: Customer[];\n  result$: Observable<Courier[]>;\n\n  // tslint:disable-next-line:max-line-length\n  constructor(private router: Router, private apiService: HttpAdiministratorService, private confirmService: ConfirmDialogService, private pipe: DecimalPipe, private dataService: DataService) {\n    this.apiService.getCouriers().subscribe(data => {\n      couriers = [...data];\n      this.result$ = this.filter.valueChanges.pipe(\n        startWith(''),\n        map(text => search(text, pipe))\n      );\n    });\n  }\n\n  ngOnInit() {\n  }\n  deleteCourier(courier: Courier): void {\n    this.confirmService.confirm('Моля потвърдете', 'Искате ли да изтриете този куриер ?', 'Откажи', 'Изпрати')\n      .then((confirmed) => {\n        // tslint:disable-next-line:triple-equals\n        if (confirmed != false) {\n          this.apiService.deleteCourier(courier.courier_id).subscribe( data => {\n            couriers = couriers.filter(u => u !== courier);\n          });\n        }\n      })\n      .catch(() => console.log('User dismissed the dialog (e.g., by using ESC, clicking the cross icon, or clicking outside the dialog)'));\n  }\n\n  editCourier(courier: Courier): void {\n    // window.localStorage.removeItem('editUserId');\n    // window.localStorage.setItem('editUserId', customer.toString());\n    this.dataService.courier = courier;\n    this.router.navigate(['/administrator/edit-user']);\n  }\n\n  addCourier() {\n    this.router.navigate(['/administrator/add-courier']);\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}