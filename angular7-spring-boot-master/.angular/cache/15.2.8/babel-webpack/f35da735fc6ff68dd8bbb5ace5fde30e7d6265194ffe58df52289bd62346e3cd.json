{"ast":null,"code":"import { __decorate, __metadata, __spreadArray } from \"tslib\";\nimport __NG_CLI_RESOURCE__0 from \"./problem-packages.component.html?ngResource\";\nimport __NG_CLI_RESOURCE__1 from \"./problem-packages.component.css?ngResource\";\nimport { Component } from '@angular/core';\nimport { DecimalPipe } from '@angular/common';\nimport { DataService } from '../../../service/data.service';\nimport { HttpCourierService } from '../../../service/courier/http-courier.service';\nimport { NgbModal } from '@ng-bootstrap/ng-bootstrap';\nimport { map, startWith } from 'rxjs/operators';\nimport { FormControl } from '@angular/forms';\nvar courierPackages;\nvar statusType = 'получена';\nfunction search(text, pipe) {\n  return courierPackages.filter(function (packageProblem) {\n    var term = text.toLowerCase();\n    // @ts-ignore\n    return packageProblem.packages_problem.name_package.toLowerCase().includes(term) || packageProblem.packages_problem.customer.name.toLowerCase().includes(term) || packageProblem.packages_problem.customer.phone.toLowerCase().includes(term);\n  });\n}\nvar ProblemPackagesComponent = /** @class */function () {\n  // tslint:disable-next-line:max-line-length\n  function ProblemPackagesComponent(pipe, dataService, httpCourier, modalService) {\n    var _this = this;\n    this.dataService = dataService;\n    this.httpCourier = httpCourier;\n    this.modalService = modalService;\n    this.filter = new FormControl('');\n    this.username = sessionStorage.getItem('username');\n    console.log(this.username);\n    this.httpCourier.getProblemPackages(this.username).subscribe(function (data) {\n      // @ts-ignore\n      courierPackages = __spreadArray([], data, true);\n      console.log(courierPackages);\n      _this.packages$ = _this.filter.valueChanges.pipe(startWith(''), map(function (text) {\n        return search(text, pipe);\n      }));\n    });\n  }\n  ProblemPackagesComponent.prototype.ngOnInit = function () {};\n  ProblemPackagesComponent.prototype.updatePackage = function (packages) {\n    if (packages.packages_problem.package_id != null && statusType != null) {\n      // @ts-ignore\n      this.httpCourier.updatePackageSuccessfull(statusType, packages.package_id).subscribe(function (data) {\n        // tslint:disable-next-line:triple-equals\n        // @ts-ignore\n        alert('Пратката е доставена успешно!');\n      });\n    }\n  };\n  ProblemPackagesComponent.ctorParameters = function () {\n    return [{\n      type: DecimalPipe\n    }, {\n      type: DataService\n    }, {\n      type: HttpCourierService\n    }, {\n      type: NgbModal\n    }];\n  };\n  ProblemPackagesComponent = __decorate([Component({\n    selector: 'app-problem-packages',\n    template: __NG_CLI_RESOURCE__0,\n    styles: [__NG_CLI_RESOURCE__1]\n  }), __metadata(\"design:paramtypes\", [DecimalPipe, DataService, HttpCourierService, NgbModal])], ProblemPackagesComponent);\n  return ProblemPackagesComponent;\n}();\nexport { ProblemPackagesComponent };","map":{"version":3,"mappings":";;;AAAA,SAAQA,SAAS,QAA8B,eAAe;AAC9D,SAAQC,WAAW,QAAO,iBAAiB;AAC3C,SAAQC,WAAW,QAAO,+BAA+B;AACzD,SAAQC,kBAAkB,QAAO,+CAA+C;AAChF,SAAQC,QAAQ,QAAO,4BAA4B;AACnD,SAAQC,GAAG,EAAEC,SAAS,QAAO,gBAAgB;AAI7C,SAAQC,WAAW,QAAO,gBAAgB;AAC1C,IAAIC,eAAiC;AACrC,IAAMC,UAAU,GAAG,UAAU;AAE7B,SAASC,MAAMA,CAACC,IAAY,EAAEC,IAAmB;EAC/C,OAAOJ,eAAe,CAACK,MAAM,CAAC,wBAAc;IAC1C,IAAMC,IAAI,GAAGH,IAAI,CAACI,WAAW,EAAE;IAC/B;IACA,OAAOC,cAAc,CAACC,gBAAgB,CAACC,YAAY,CAACH,WAAW,EAAE,CAACI,QAAQ,CAACL,IAAI,CAAC,IAC1EE,cAAc,CAACC,gBAAgB,CAACG,QAAQ,CAACC,IAAI,CAACN,WAAW,EAAE,CAACI,QAAQ,CAACL,IAAI,CAAC,IAC1EE,cAAc,CAACC,gBAAgB,CAACG,QAAQ,CAACE,KAAK,CAACP,WAAW,EAAE,CAACI,QAAQ,CAACL,IAAI,CAAC;EACnF,CAAC,CAAC;AACJ;AAMA;EAKE;EACA,kCAAYF,IAAiB,EAAUW,WAAwB,EAAUC,WAA+B,EAAUC,YAAsB;IAAxI;IAAuC,gBAAW,GAAXF,WAAW;IAAuB,gBAAW,GAAXC,WAAW;IAA8B,iBAAY,GAAZC,YAAY;IAH9H,WAAM,GAAG,IAAIlB,WAAW,CAAC,EAAE,CAAC;IAI1B,IAAI,CAACmB,QAAQ,GAAGC,cAAc,CAACC,OAAO,CAAC,UAAU,CAAC;IAClDC,OAAO,CAACC,GAAG,CAAC,IAAI,CAACJ,QAAQ,CAAC;IAC1B,IAAI,CAACF,WAAW,CAACO,kBAAkB,CAAC,IAAI,CAACL,QAAQ,CAAC,CAACM,SAAS,CAAC,cAAI;MAC/D;MACAxB,eAAe,qBAAOyB,IAAI,OAAC;MAC3BJ,OAAO,CAACC,GAAG,CAACtB,eAAe,CAAC;MAC5B0B,KAAI,CAACC,SAAS,GAAGD,KAAI,CAACrB,MAAM,CAACuB,YAAY,CAACxB,IAAI,CAC5CN,SAAS,CAAC,EAAE,CAAC,EACbD,GAAG,CAAC,cAAI;QAAI,aAAM,CAACM,IAAI,EAAEC,IAAI,CAAC;MAAlB,CAAkB,CAAC,CAChC;IACH,CAAC,CAAC;EACJ;EAEAyB,2CAAQ,GAAR,aACA,CAAC;EACDA,gDAAa,GAAb,UAAcC,QAAwB;IACpC,IAAIA,QAAQ,CAACrB,gBAAgB,CAACsB,UAAU,IAAI,IAAI,IAAI9B,UAAU,IAAI,IAAI,EAAE;MACtE;MACA,IAAI,CAACe,WAAW,CAACgB,wBAAwB,CAAC/B,UAAU,EAAE6B,QAAQ,CAACC,UAAU,CAAC,CAACP,SAAS,CAAC,cAAI;QACvF;QACA;QACAS,KAAK,CAAC,+BAA+B,CAAC;MACxC,CAAC,CAAC;;EAEN,CAAC;;;;;;;;;;;;EA/BUJ,wBAAwB,eALpCrC,SAAS,CAAC;IACT0C,QAAQ,EAAE,sBAAsB;IAChCC,8BAAgD;;GAEjD,CAAC,mCAOkB1C,WAAW,EAAuBC,WAAW,EAAuBC,kBAAkB,EAAwBC,QAAQ,KAN7HiC,wBAAwB,CAgCpC;EAAD,+BAAC;CAAA,CArCD;SAKaA,wBAAwB","names":["Component","DecimalPipe","DataService","HttpCourierService","NgbModal","map","startWith","FormControl","courierPackages","statusType","search","text","pipe","filter","term","toLowerCase","packageProblem","packages_problem","name_package","includes","customer","name","phone","dataService","httpCourier","modalService","username","sessionStorage","getItem","console","log","getProblemPackages","subscribe","data","_this","packages$","valueChanges","ProblemPackagesComponent","packages","package_id","updatePackageSuccessfull","alert","selector","template"],"sourceRoot":"","sources":["E:\\Programs\\SpringAngularProject\\angular7-springboot-crud-tutorial-master\\update-version\\angular7-spring-boot-master\\src\\app\\courier\\layout-courier\\problem-packages\\problem-packages.component.ts"],"sourcesContent":["import {Component, OnInit, PipeTransform} from '@angular/core';\nimport {DecimalPipe} from '@angular/common';\nimport {DataService} from '../../../service/data.service';\nimport {HttpCourierService} from '../../../service/courier/http-courier.service';\nimport {NgbModal} from '@ng-bootstrap/ng-bootstrap';\nimport {map, startWith} from 'rxjs/operators';\nimport {Observable} from 'rxjs';\nimport {Packages} from '../../../models/Packages';\nimport {PackageProblem} from '../../../models/PackageProblem';\nimport {FormControl} from '@angular/forms';\nlet courierPackages: PackageProblem[];\nconst statusType = 'получена';\n\nfunction search(text: string, pipe: PipeTransform): PackageProblem[] {\n  return courierPackages.filter(packageProblem => {\n    const term = text.toLowerCase();\n    // @ts-ignore\n    return packageProblem.packages_problem.name_package.toLowerCase().includes(term)\n       || packageProblem.packages_problem.customer.name.toLowerCase().includes(term)\n       || packageProblem.packages_problem.customer.phone.toLowerCase().includes(term);\n  });\n}\n@Component({\n  selector: 'app-problem-packages',\n  templateUrl: './problem-packages.component.html',\n  styleUrls: ['./problem-packages.component.css']\n})\nexport class ProblemPackagesComponent implements OnInit {\n  username: string;\n  packages$: Observable<PackageProblem[]>;\n  filter = new FormControl('');\n\n  // tslint:disable-next-line:max-line-length\n  constructor(pipe: DecimalPipe, private dataService: DataService, private httpCourier: HttpCourierService, private modalService: NgbModal) {\n    this.username = sessionStorage.getItem('username');\n    console.log(this.username);\n    this.httpCourier.getProblemPackages(this.username).subscribe(data => {\n      // @ts-ignore\n      courierPackages = [...data];\n      console.log(courierPackages);\n      this.packages$ = this.filter.valueChanges.pipe(\n        startWith(''),\n        map(text => search(text, pipe))\n      );\n    });\n  }\n\n  ngOnInit() {\n  }\n  updatePackage(packages: PackageProblem): void {\n    if (packages.packages_problem.package_id != null && statusType != null) {\n      // @ts-ignore\n      this.httpCourier.updatePackageSuccessfull(statusType, packages.package_id).subscribe(data => {\n        // tslint:disable-next-line:triple-equals\n        // @ts-ignore\n        alert('Пратката е доставена успешно!');\n      });\n    }\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}