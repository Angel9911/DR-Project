{"ast":null,"code":"import { PipeTransform } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { HttpAdiministratorService } from '../../../service/administrator/http-adiministrator.service';\nimport { ConfirmDialogService } from '../../../service/confirm-dialog.service';\nimport { FormControl } from '@angular/forms';\nimport { map, startWith } from 'rxjs/operators';\nimport { DecimalPipe } from '@angular/common';\nimport { DataService } from '../../../service/data.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../../../service/administrator/http-adiministrator.service\";\nimport * as i3 from \"../../../service/confirm-dialog.service\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"../../../service/data.service\";\nimport * as i6 from \"../../../headers/header-layout-adiministrator/header-layout-adiministrator.component\";\nimport * as i7 from \"@ng-bootstrap/ng-bootstrap\";\nimport * as i8 from \"@angular/forms\";\nfunction ListCouriersComponent_tr_28_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\")(1, \"th\", 11);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵelement(4, \"ngb-highlight\", 12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵelement(6, \"ngb-highlight\", 12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵelement(8, \"ngb-highlight\", 12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\");\n    i0.ɵɵelement(10, \"ngb-highlight\", 12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"td\")(12, \"button\", 13);\n    i0.ɵɵlistener(\"click\", function ListCouriersComponent_tr_28_Template_button_click_12_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r4);\n      const courier_r1 = restoredCtx.$implicit;\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.deleteCourier(courier_r1));\n    });\n    i0.ɵɵtext(13, \"\\u0418\\u0437\\u0442\\u0440\\u0438\\u0439\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"button\", 14);\n    i0.ɵɵlistener(\"click\", function ListCouriersComponent_tr_28_Template_button_click_14_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r4);\n      const courier_r1 = restoredCtx.$implicit;\n      const ctx_r5 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r5.editCourier(courier_r1));\n    });\n    i0.ɵɵtext(15, \"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u0430\\u0439\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const courier_r1 = ctx.$implicit;\n    const i_r2 = ctx.index;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i_r2 + 1);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"result\", courier_r1.courier_first_name)(\"term\", ctx_r0.filter.value);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"result\", courier_r1.courier_last_name)(\"term\", ctx_r0.filter.value);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"result\", courier_r1.courier_city_name)(\"term\", ctx_r0.filter.value);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"result\", courier_r1.courier_phone)(\"term\", ctx_r0.filter.value);\n  }\n}\n// tslint:disable-next-line:prefer-const\nlet couriers;\nfunction search(text, pipe) {\n  return couriers.filter(courier => {\n    console.log(courier);\n    const term = text.toLowerCase();\n    return courier.courier_first_name.toLowerCase().includes(term) || courier.courier_last_name.toLowerCase().includes(term) || courier.courier_city_name.toLowerCase().includes(term) || courier.courier_phone.toLowerCase().includes(term);\n  });\n}\nexport let ListCouriersComponent = /*#__PURE__*/(() => {\n  class ListCouriersComponent {\n    // tslint:disable-next-line:max-line-length\n    constructor(router, apiService, confirmService, pipe, dataService) {\n      this.router = router;\n      this.apiService = apiService;\n      this.confirmService = confirmService;\n      this.pipe = pipe;\n      this.dataService = dataService;\n      this.filter = new FormControl('');\n      this.apiService.getCouriers().subscribe(data => {\n        couriers = [...data];\n        this.result$ = this.filter.valueChanges.pipe(startWith(''), map(text => search(text, pipe)));\n      });\n    }\n    ngOnInit() {}\n    deleteCourier(courier) {\n      this.confirmService.confirm('Моля потвърдете', 'Искате ли да изтриете този куриер ?', 'Откажи', 'Изпрати').then(confirmed => {\n        // tslint:disable-next-line:triple-equals\n        if (confirmed != false) {\n          this.apiService.deleteCourier(courier.courier_id).subscribe(data => {\n            couriers = couriers.filter(u => u !== courier);\n          });\n        }\n      }).catch(() => console.log('User dismissed the dialog (e.g., by using ESC, clicking the cross icon, or clicking outside the dialog)'));\n    }\n    editCourier(courier) {\n      // window.localStorage.removeItem('editUserId');\n      // window.localStorage.setItem('editUserId', customer.toString());\n      this.dataService.courier = courier;\n      this.router.navigate(['/administrator/edit-user']);\n    }\n    addCourier() {\n      this.router.navigate(['/administrator/add-courier']);\n    }\n  }\n  ListCouriersComponent.ɵfac = function ListCouriersComponent_Factory(t) {\n    return new (t || ListCouriersComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.HttpAdiministratorService), i0.ɵɵdirectiveInject(i3.ConfirmDialogService), i0.ɵɵdirectiveInject(i4.DecimalPipe), i0.ɵɵdirectiveInject(i5.DataService));\n  };\n  ListCouriersComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ListCouriersComponent,\n    selectors: [[\"app-list-couriers\"]],\n    decls: 30,\n    vars: 4,\n    consts: [[1, \"col-md-6\", \"user-container\"], [1, \"search\"], [1, \"mb-3\", \"row\"], [\"for\", \"table-filtering-search\", 1, \"col-xs-3\", \"col-sm-auto\", \"col-form-label\"], [1, \"col-xs-3\", \"col-sm-auto\"], [\"id\", \"table-filtering-search\", \"type\", \"text\", 1, \"form-control\", 3, \"formControl\"], [2, \"margin\", \"auto\"], [1, \"btn\", \"btn-info\", 3, \"click\"], [1, \"table\", \"table-striped\"], [1, \"hidden\"], [4, \"ngFor\", \"ngForOf\"], [\"scope\", \"row\"], [3, \"result\", \"term\"], [1, \"btn\", \"btn-danger\", 3, \"click\"], [1, \"btn\", \"btn-success\", 2, \"margin-left\", \"20px\", 3, \"click\"]],\n    template: function ListCouriersComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelement(0, \"app-header-layout-adiministrator\");\n        i0.ɵɵelementStart(1, \"div\", 0);\n        i0.ɵɵelement(2, \"br\");\n        i0.ɵɵelementStart(3, \"form\", 1)(4, \"div\", 2)(5, \"label\", 3);\n        i0.ɵɵtext(6, \"\\u0422\\u044A\\u0440\\u0441\\u0435\\u043D\\u0435 \\u043D\\u0430 \\u043A\\u043B\\u0438\\u0435\\u043D\\u0442(\\u043F\\u043E \\u0442\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D\\u0435\\u043D \\u043D\\u043E\\u043C\\u0435\\u0440):\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(7, \"div\", 4);\n        i0.ɵɵelement(8, \"input\", 5);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(9, \"h2\", 6);\n        i0.ɵɵtext(10, \"\\u0418\\u043D\\u0444\\u043E\\u0440\\u043C\\u0430\\u0446\\u0438\\u044F \\u0437\\u0430 \\u043A\\u0443\\u0440\\u0438\\u0435\\u0440\\u0438\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(11, \"br\");\n        i0.ɵɵelementStart(12, \"button\", 7);\n        i0.ɵɵlistener(\"click\", function ListCouriersComponent_Template_button_click_12_listener() {\n          return ctx.addCourier();\n        });\n        i0.ɵɵtext(13, \"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438 \\u043A\\u0443\\u0440\\u0438\\u0435\\u0440\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(14, \"table\", 8)(15, \"thead\")(16, \"tr\")(17, \"th\", 9);\n        i0.ɵɵtext(18, \"#\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(19, \"th\");\n        i0.ɵɵtext(20, \"\\u0418\\u043C\\u0435 \\u043D\\u0430 \\u043A\\u0443\\u0440\\u0438\\u0435\\u0440\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(21, \"th\");\n        i0.ɵɵtext(22, \"\\u0424\\u0430\\u043C\\u0438\\u043B\\u0438\\u044F \\u043D\\u0430 \\u043A\\u0443\\u0440\\u0438\\u0435\\u0440\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(23, \"th\");\n        i0.ɵɵtext(24, \"\\u0420\\u0435\\u0433\\u0438\\u043E\\u043D\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(25, \"th\");\n        i0.ɵɵtext(26, \"\\u0422\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(27, \"tbody\");\n        i0.ɵɵtemplate(28, ListCouriersComponent_tr_28_Template, 16, 9, \"tr\", 10);\n        i0.ɵɵpipe(29, \"async\");\n        i0.ɵɵelementEnd()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(8);\n        i0.ɵɵproperty(\"formControl\", ctx.filter);\n        i0.ɵɵadvance(20);\n        i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(29, 2, ctx.result$));\n      }\n    },\n    dependencies: [i4.NgForOf, i6.HeaderLayoutAdiministratorComponent, i7.NgbHighlight, i8.ɵNgNoValidate, i8.DefaultValueAccessor, i8.NgControlStatus, i8.NgControlStatusGroup, i8.NgForm, i8.FormControlDirective, i4.AsyncPipe]\n  });\n  return ListCouriersComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}