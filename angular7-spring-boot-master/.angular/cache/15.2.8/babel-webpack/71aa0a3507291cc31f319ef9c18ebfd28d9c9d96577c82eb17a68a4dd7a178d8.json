{"ast":null,"code":"import _defineProperty from \"E:/Programs/SpringAngularProject/angular7-springboot-crud-tutorial-master/update-version/angular7-spring-boot-master/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport { PipeTransform } from '@angular/core';\nimport { FormControl } from '@angular/forms';\nimport { DecimalPipe } from '@angular/common';\nimport { map, startWith } from 'rxjs/operators';\nimport { DataService } from '../../../service/data.service';\nimport { HttpCourierService } from '../../../service/courier/http-courier.service';\nimport { NgbModal } from '@ng-bootstrap/ng-bootstrap';\nimport { CommentDialogComponent } from '../../../helpers/comment-dialog/comment-dialog.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\nimport * as i2 from \"../../../service/data.service\";\nimport * as i3 from \"../../../service/courier/http-courier.service\";\nimport * as i4 from \"@ng-bootstrap/ng-bootstrap\";\nimport * as i5 from \"../../../headers/header-courier/header-courier.component\";\nimport * as i6 from \"@angular/material/sidenav\";\nimport * as i7 from \"@angular/forms\";\nfunction ListPackagesComponent_tr_33_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵelement(2, \"ngb-highlight\", 9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵelement(4, \"ngb-highlight\", 9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵelement(6, \"ngb-highlight\", 9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵelement(8, \"ngb-highlight\", 9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\");\n    i0.ɵɵelement(10, \"ngb-highlight\", 9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"td\");\n    i0.ɵɵelement(12, \"ngb-highlight\", 9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"td\");\n    i0.ɵɵelement(14, \"ngb-highlight\", 9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"td\");\n    i0.ɵɵelement(16, \"ngb-highlight\", 9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"td\");\n    i0.ɵɵelement(18, \"ngb-highlight\", 9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(19, \"td\");\n    i0.ɵɵelement(20, \"ngb-highlight\", 9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(21, \"td\")(22, \"button\", 10);\n    i0.ɵɵlistener(\"click\", function ListPackagesComponent_tr_33_Template_button_click_22_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r4);\n      const package_r1 = restoredCtx.$implicit;\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.updateProblemPackage(package_r1));\n    });\n    i0.ɵɵtext(23, \"\\u041F\\u0440\\u043E\\u0431\\u043B\\u0435\\u043C \\u0441 \\u043F\\u0440\\u0430\\u0442\\u043A\\u0430\\u0442\\u0430\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(24, \"button\", 11);\n    i0.ɵɵlistener(\"click\", function ListPackagesComponent_tr_33_Template_button_click_24_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r4);\n      const package_r1 = restoredCtx.$implicit;\n      const ctx_r5 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r5.updatePackage(package_r1));\n    });\n    i0.ɵɵtext(25, \"\\u0414\\u043E\\u0441\\u0442\\u0430\\u0432\\u0435\\u043D\\u0430\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const package_r1 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"result\", package_r1.package_id)(\"term\", ctx_r0.filter.value);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"result\", package_r1.name_package)(\"term\", ctx_r0.filter.value);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"result\", package_r1.typePackage.type_name)(\"term\", ctx_r0.filter.value);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"result\", package_r1.customer.name + \" \" + package_r1.customer.last_name)(\"term\", ctx_r0.filter.value);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"result\", package_r1.customer.phone)(\"term\", ctx_r0.filter.value);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"result\", package_r1.customer.address)(\"term\", ctx_r0.filter.value);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"result\", package_r1.package_price)(\"term\", ctx_r0.filter.value);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"result\", package_r1.total_cost)(\"term\", ctx_r0.filter.value);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"result\", package_r1.date_register_package)(\"term\", ctx_r0.filter.value);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"result\", package_r1.statusPackage.status_type)(\"term\", ctx_r0.filter.value);\n  }\n}\n// tslint:disable-next-line:prefer-const\nlet courierPackages;\nconst statusType = 'получена';\nconst statusTypeProblem = 'Проблем с пратката';\nfunction search(text, pipe) {\n  return courierPackages.filter(packages => {\n    const term = text.toLowerCase();\n    // @ts-ignore\n    return packages.name_package.toLowerCase().includes(term) || packages.customer.name.toLowerCase().includes(term) || packages.customer.phone.toLowerCase().includes(term);\n  });\n}\nexport let ListPackagesComponent = /*#__PURE__*/(() => {\n  class ListPackagesComponent {\n    // tslint:disable-next-line:max-line-length\n    constructor(pipe, dataService, httpCourier, modalService) {\n      _defineProperty(this, \"dataService\", void 0);\n      _defineProperty(this, \"httpCourier\", void 0);\n      _defineProperty(this, \"modalService\", void 0);\n      _defineProperty(this, \"packages$\", void 0);\n      _defineProperty(this, \"username\", void 0);\n      _defineProperty(this, \"getComment\", void 0);\n      _defineProperty(this, \"comment\", void 0);\n      _defineProperty(this, \"filter\", new FormControl(''));\n      this.dataService = dataService;\n      this.httpCourier = httpCourier;\n      this.modalService = modalService;\n      this.username = sessionStorage.getItem('username');\n      console.log(this.username);\n      this.httpCourier.getPackages(this.username).subscribe(data => {\n        // @ts-ignore\n        courierPackages = [...data];\n        // tslint:disable-next-line:only-arrow-functions\n        this.packages$ = this.filter.valueChanges.pipe(startWith(''), map(text => search(text, pipe)));\n      });\n    }\n    ngOnInit() {}\n    updatePackage(packages) {\n      console.log(packages.package_id);\n      if (packages.package_id != null && statusType != null) {\n        // @ts-ignore\n        this.httpCourier.updatePackageSuccessfull(statusType, packages.package_id).subscribe(data => {\n          // tslint:disable-next-line:triple-equals\n          // @ts-ignore\n          alert('Пратката е доставена успешно!');\n        });\n      }\n    }\n    updateProblemPackage(packages) {\n      const dialogRef = this.modalService.open(CommentDialogComponent);\n      dialogRef.result.then(result => {\n        if (result.event === true) {\n          this.dataService.packagesId = packages.package_id;\n          this.httpCourier.updateProblemPackage(statusTypeProblem, packages.package_id, result.data, result.file).subscribe(data => {\n            alert('Проблемът на пратката е регистриран успешно!');\n          });\n          console.log('dada' + result.data); // Refresh Data in table grid\n        } else {}\n      }, reason => {});\n      console.log(dialogRef.result);\n    }\n  }\n  _defineProperty(ListPackagesComponent, \"\\u0275fac\", function ListPackagesComponent_Factory(t) {\n    return new (t || ListPackagesComponent)(i0.ɵɵdirectiveInject(i1.DecimalPipe), i0.ɵɵdirectiveInject(i2.DataService), i0.ɵɵdirectiveInject(i3.HttpCourierService), i0.ɵɵdirectiveInject(i4.NgbModal));\n  });\n  _defineProperty(ListPackagesComponent, \"\\u0275cmp\", /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ListPackagesComponent,\n    selectors: [[\"app-list-packages\"]],\n    decls: 35,\n    vars: 4,\n    consts: [[1, \"example-container\"], [1, \"search\"], [1, \"mb-3\", \"row\"], [\"for\", \"table-filtering-search\", 1, \"col-xs-3\", \"col-sm-auto\", \"col-form-label\"], [1, \"col-xs-3\", \"col-sm-auto\"], [\"id\", \"table-filtering-search\", \"type\", \"text\", 1, \"form-control\", 3, \"formControl\"], [1, \"table\", \"table-striped\"], [\"scope\", \"col\"], [4, \"ngFor\", \"ngForOf\"], [3, \"result\", \"term\"], [1, \"btn\", \"btn-danger\", 2, \"width\", \"178px\", 3, \"click\"], [1, \"btn\", \"btn-success\", 2, \"width\", \"178px\", 3, \"click\"]],\n    template: function ListPackagesComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelement(0, \"app-header-courier\");\n        i0.ɵɵelementStart(1, \"mat-sidenav-container\", 0)(2, \"mat-sidenav-content\")(3, \"form\", 1)(4, \"div\", 2)(5, \"label\", 3);\n        i0.ɵɵtext(6, \"\\u0422\\u044A\\u0440\\u0441\\u0438 \\u043F\\u0440\\u0430\\u0442\\u043A\\u0430(\\u043F\\u043E \\u0438\\u043C\\u0435 \\u0438\\u043B\\u0438 \\u043F\\u043E \\u0442\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D \\u043D\\u0430 \\u043A\\u043B\\u0438\\u0435\\u043D\\u0442):\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(7, \"div\", 4);\n        i0.ɵɵelement(8, \"input\", 5);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(9, \"table\", 6)(10, \"thead\")(11, \"tr\")(12, \"th\", 7);\n        i0.ɵɵtext(13, \"\\u041A\\u043E\\u0434 \\u043D\\u0430 \\u043F\\u0440\\u0430\\u0442\\u043A\\u0430\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(14, \"th\", 7);\n        i0.ɵɵtext(15, \"\\u0418\\u043C\\u0435 \\u043D\\u0430 \\u043F\\u0440\\u0430\\u0442\\u043A\\u0430\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(16, \"th\", 7);\n        i0.ɵɵtext(17, \"\\u0422\\u0438\\u043F \\u043D\\u0430 \\u043F\\u0440\\u0430\\u0442\\u043A\\u0430\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(18, \"th\", 7);\n        i0.ɵɵtext(19, \"\\u0418\\u043C\\u0435 \\u043D\\u0430 \\u043A\\u043B\\u0438\\u0435\\u043D\\u0442\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(20, \"th\", 7);\n        i0.ɵɵtext(21, \"\\u0422\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D\\u0435\\u043D \\u043D\\u043E\\u043C\\u0435\\u0440 \\u043D\\u0430 \\u043A\\u043B\\u0438\\u0435\\u043D\\u0442\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(22, \"th\", 7);\n        i0.ɵɵtext(23, \"\\u0410\\u0434\\u0440\\u0435\\u0441 \\u0437\\u0430 \\u0434\\u043E\\u0441\\u0442\\u0430\\u0432\\u043A\\u0430\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(24, \"th\", 7);\n        i0.ɵɵtext(25, \"\\u0426\\u0435\\u043D\\u0430 \\u043D\\u0430 \\u043F\\u0440\\u0430\\u0442\\u043A\\u0430\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(26, \"th\", 7);\n        i0.ɵɵtext(27, \"\\u041E\\u0431\\u0449\\u0430 \\u0446\\u0435\\u043D\\u0430(\\u0441 \\u0432\\u043A\\u043B\\u044E\\u0447\\u0435\\u043D\\u0430 \\u0442\\u0430\\u043A\\u0441\\u0430)\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(28, \"th\", 7);\n        i0.ɵɵtext(29, \"\\u0414\\u0430\\u0442\\u0430 \\u043D\\u0430 \\u0438\\u0437\\u043F\\u0440\\u0430\\u0449\\u0430\\u043D\\u0435\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(30, \"th\", 7);\n        i0.ɵɵtext(31, \"\\u0421\\u0442\\u0430\\u0442\\u0443\\u0441 \\u043D\\u0430 \\u043F\\u0440\\u0430\\u0442\\u043A\\u0430\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(32, \"tbody\");\n        i0.ɵɵtemplate(33, ListPackagesComponent_tr_33_Template, 26, 20, \"tr\", 8);\n        i0.ɵɵpipe(34, \"async\");\n        i0.ɵɵelementEnd()()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(8);\n        i0.ɵɵproperty(\"formControl\", ctx.filter);\n        i0.ɵɵadvance(25);\n        i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(34, 2, ctx.packages$));\n      }\n    },\n    dependencies: [i1.NgForOf, i5.HeaderCourierComponent, i6.MatSidenavContainer, i6.MatSidenavContent, i4.NgbHighlight, i7.ɵNgNoValidate, i7.DefaultValueAccessor, i7.NgControlStatus, i7.NgControlStatusGroup, i7.NgForm, i7.FormControlDirective, i1.AsyncPipe],\n    styles: [\".search[_ngcontent-%COMP%]{margin-top:20px;margin-left:20px;display:flex}.hrStyle[_ngcontent-%COMP%]{border-top:1px solid #8c8b8b;border-bottom:1px solid #fff;margin-bottom:-10px}.flexcon[_ngcontent-%COMP%]{display:flex}\"]\n  }));\n  return ListPackagesComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}